<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Music Player</title>
    <script src="js/jquery-2.1.3.min.js"></script>
    <link rel="stylesheet" href="css/sample.css">
</head>

<body>
    <!--------------------------------ヘッダ----------------------------------------->
    <header>
        <!-- <h1>Music Player</h1> -->
        <img src="images/bg.jpg" srcset="images/bg.jpg" alt="night">
    </header>
    <!-------------------------------メインコンテンツ---------------------------------->
    <main>
        <h3>楽曲リスト</h3>
        <ul id="music">
            <li id="tr1" data-flg="Track 1">Track 1 <span id="play1">▶︎</span><br></li>
            <li id="tr2" data-flg="Track 2">Track 2 <span id="play2">▶︎</span><br></li>
            <li id="tr3" data-flg="Track 3">Track 3 <span id="play3">▶︎</span><br></li>
            <li id="tr4" data-flg="Track 4">Track 4 <span id="play4">▶︎</span><br></li>
            <li id="tr5" data-flg="Track 5">Track 5 <span id="play5">▶︎</span><br></li>
        </ul>

        <h3>視聴履歴</h3>
        <table id="list">
            <!-- ここに追加データが挿入される -->



        </table>
        <div class="wrap">
            <button class="button">
                <div id="clear">履歴を消去</div>
            </button>
        </div>
    </main>


    <!------------------------------------スクリプト--------------------------------->

    <script>
        var sound1 = new Audio("audio/somebody.mp3");
        var sound2 = new Audio("audio/sd.mp3");
        var sound3 = new Audio("audio/lc.mp3");
        var sound4 = new Audio("audio/et.mp3");
        var sound5 = new Audio("audio/od.mp3");

        //各トラック再生
        $("#tr1, #tr2, #tr3, #tr4, #tr5").on("click", function () {
            //クリックしたトラックの番号を変数に割り当て
            const tn = $(this).attr("data-flg");
            const key = tn;
            const value = $(this).attr('id');

            //音楽を再生・記録
            if (value == "tr1") {
                if (!sound1.paused) {
                    sound1.pause();
                    $("#play1").html('▶︎');
                } else {
                    sound1.play();
                    $("#play1").html('■');
                    localStorage.setItem(key, value);
                    //一覧表示に追加
                    const html = '<tr><th>' + key + '</th><</tr>'
                    $("#list").append(html);
                }
            }

            if (value == "tr2") {
                if (!sound2.paused) {
                    sound2.pause();
                    $("#play2").html('▶︎');
                } else {
                    sound2.play();
                    $("#play2").html('■');
                    localStorage.setItem(key, value);
                    //一覧表示に追加
                    const html = '<tr><th>' + key + '</th><</tr>'
                    $("#list").append(html);
                }
            }

            if (value == "tr3") {
                if (!sound3.paused) {
                    sound3.pause();
                    $("#play3").html('▶︎');
                } else {
                    sound3.play();
                    $("#play3").html('■');
                    localStorage.setItem(key, value);
                    //一覧表示に追加
                    const html = '<tr><th>' + key + '</th><</tr>'
                    $("#list").append(html);
                }
            }

            if (value == "tr4") {
                if (!sound4.paused) {
                    sound4.pause();
                    $("#play4").html('▶︎');
                } else {
                    sound4.play();
                    $("#play4").html('■');
                    localStorage.setItem(key, value);
                    //一覧表示に追加
                    const html = '<tr><th>' + key + '</th><</tr>'
                    $("#list").append(html);
                }
            }

            if (value == "tr5") {
                if (!sound5.paused) {
                    sound5.pause();
                    $("#play5").html('▶︎');
                } else {
                    sound5.play();
                    $("#play5").html('■');
                    localStorage.setItem(key, value);
                    //一覧表示に追加
                    const html = '<tr><th>' + key + '</th><</tr>'
                    $("#list").append(html);
                }
            }

        });


        //2.clear クリックイベント
        $("#clear").on("click", function () {
            localStorage.clear();
            $("#list").empty();

        });




        //3.ページ読み込み：保存データ取得表示
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);            //key名
            const value = localStorage.getItem(key);    //value名

            //一覧表示に追加
            const html = '<tr> + key + </tr>'
            $("#list").append(html);
        }




    </script>
    <footer>
        Music by https://www.khaimmusic.com/
    </footer>
</body>

</html>